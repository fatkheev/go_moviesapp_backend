# Filmoteca API
Filmoteca API — это RESTful веб-сервис для управления каталогом фильмов и актеров. Он позволяет пользователям добавлять, обновлять, удалять и просматривать информацию о фильмах и актерах. Сервис поддерживает аутентификацию и авторизацию пользователей, предоставляя различные уровни доступа к ресурсам.

## [Ознакомтесь с WIKI проекта](https://github.com/fatkheev/go_moviesapp_backend/wiki) << click

О проекте
Filmoteca API — это RESTful веб-сервис для управления каталогом фильмов и актеров. Он позволяет пользователям добавлять, обновлять, удалять и просматривать информацию о фильмах и актерах. Сервис поддерживает аутентификацию и авторизацию пользователей, предоставляя различные уровни доступа к ресурсам.

Основные функции
Управление фильмами: Пользователи могут добавлять, обновлять, удалять и получать информацию о фильмах.
Управление актерами: Пользователи могут добавлять, обновлять, удалять и получать информацию об актерах, а также просматривать, в каких фильмах участвовал каждый актер.
Регистрация и аутентификация: Поддержка регистрации пользователей с хешированием паролей и аутентификацией через JWT-токены.
Авторизация на основе ролей: Различные уровни доступа к API в зависимости от роли пользователя (например, только администраторы могут добавлять или удалять записи).

Технологии
Go (Golang): Язык программирования для создания серверной части.
PostgreSQL: Система управления базами данных для хранения информации о пользователях, фильмах и актерах.
Docker и Docker Compose: Используются для упрощения развертывания приложения и его зависимостей.
JWT (JSON Web Tokens): Для аутентификации пользователей и управления сессиями.
bcrypt: Для безопасного хеширования паролей пользователей.


# Установка и запуск
Проект можно легко развернуть с помощью Docker и Docker Compose:
```bash
make docker-start
make migrate-up
```

# API Endpoints
Описание основных точек доступа к API и методов:

* POST /register: Регистрация нового пользователя.
* POST /login: Аутентификация пользователя и получение JWT.
* GET, POST /movies: Получение списка всех фильмов или добавление нового фильма.
* PUT, DELETE /movies/{movieId}: Обновление или удаление информации о фильме.
* GET, POST /actors: Получение списка всех актеров или добавление нового актера.
* PUT, DELETE /actors/{actorId}: Обновление или удаление информации об актере.

## Todo
- [x] добавление информации об актёре (имя, пол, дата рождения)
- [x] изменение информации об актёре (Возможно изменить любую информацию об актёре, как частично, так и полностью)
- [x] ﻿﻿удаление информации об актёре
- [x] добавление информации о фильме (При добавлении фильма указываются его название (не менее 1 и не более 150 символов), описание (не более 1000 символов), дата выпуска, рейтинг (от 0 до 10) и список актёров)
- [x] изменение информации о фильме (Возможно изменить любую информацию о фильме, как частично, так и полностью)
- [x] ﻿﻿удаление информации о фильме
- [x] получение списка фильмов с возможностью сортировки по названию, по рейтингу, по дате выпуска (По умолчанию используется сортировка по рейтингу (по убыванию))
- [x] поиск фильма по фрагменту названия, по фрагменту имени актёра
- [x] получение списка актёров, для каждого актёра выдаётся также список фильмов с его участием
- [x] АРІ должен быть закрыт авторизацией (﻿﻿Поддерживаются две роли пользователей - обычный пользователь и администратор. Обычный пользователь имеет доступ только на получение данных и поиск, администратор - на все действия. Для упрощения можно считать, что соответствие пользователей и ролей задается вручную (например, напрямую через БД))
- [x] разворот бэкенда на Docker'е
- [x] разворот базы данных Postgresql на Docker'е
- [x] создание скрипта SQL для наполнения таблицами базу данных
- [x] спецификация на АРІ (в формате Swagger 2.0 или OpenAPI 3.0)  
- [x] использовать подход api-first (генерация кода из спецификации) или code-first (генерация спецификации из кода)
- [x] добавить логирование - в лог должна попадать базовая информация об обрабатываемых запросах, ошибки
- [ ] покрыть код приложения юнит-тестами не менее чем на 70%
- [x] создать Dockerfile для сборки образа
- [x] создать docker-compose файл для запуска окружения с работающим приложением и СУБД
